/**
 * ソーシャル認証ボタンコンポーネント
 * @package MatsueOnsenMap
 * @module components/OAuthButtons
 */
import { supabase } from "@/lib/supabaseClient";

export default function OAuthButtons() {
  /**
   * Google OAuth認証を開始
   */
  async function handleGoogleSignIn() {
    // ※開発段階では省略された形のみ実装
    // Supabaseのコアライブラリを使用した本実装は、Google開発コンソールの設定後に修正
    const { error } = await supabase.auth.signInWithOAuth({
      provider: "google",
      options: {
        redirectTo: `${window.location.origin}/auth/callback`,
      },
    });

    if (error) {
      console.error("Google認証エラー:", error.message);
    }
  }

  async function handleAppleSignIn() {
    // Apple認証は本番環境で設定後に実装
    alert("Apple認証は現在未対応です");
  }

  return (
    <div className="w-full space-y-4 mb-4">
      <button
        type="button"
        onClick={handleGoogleSignIn}
        className="w-full flex items-center justify-center gap-2 border border-gray-300 rounded p-2 hover:bg-gray-50 transition"
        aria-label="Googleでサインイン"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path
            d="M23.766 12.2764c0-.9287-.093-1.8317-.262-2.7069H12.2422v5.1232h6.4871c-.2791 1.5026-1.1252 2.7736-2.3963 3.6265v3.0148h3.8804c2.2702-2.0915 3.5723-5.1705 3.5723-9.0576"
            fill="#4285F4"
          />
          <path
            d="M12.2422 24c3.2425 0 5.9573-1.0735 7.9422-2.9183l-3.8804-3.0147c-1.0746.7223-2.4535 1.1477-4.0618 1.1477-3.1234 0-5.7659-2.1108-6.7076-4.9456H1.5436v3.1127C3.5189 21.2137 7.5524 24 12.2422 24"
            fill="#34A853"
          />
          <path
            d="M5.5346 14.217c-.2402-.7166-.3767-1.4813-.3767-2.269 0-.7876.1365-1.5523.3767-2.2689V6.5664H1.5436C.551 8.3294 0 10.3534 0 12.5c0 2.1466.551 4.1706 1.5436 5.9335l3.991-3.2165"
            fill="#FBBC05"
          />
          <path
            d="M12.2422 4.9909c1.7607 0 3.3443.6052 4.5881 1.7935l3.4444-3.4456C18.2187 1.4116 15.5034 0 12.2422 0 7.5524 0 3.5189 2.7863 1.5436 6.5664l3.991 3.2165c.9417-2.8348 3.5842-4.792 6.7076-4.792"
            fill="#EA4335"
          />
        </svg>
        <span>Googleでサインイン</span>
      </button>
      <button
        type="button"
        onClick={handleAppleSignIn}
        className="w-full flex items-center justify-center gap-2 border border-gray-300 rounded p-2 hover:bg-gray-50 transition"
        aria-label="Appleでサインイン"
      >
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M16.365 1.43c0 1.14-.93 2.07-2.07 2.07-.02-1.18.95-2.07 2.07-2.07zm4.44 17.13c-.13-.27-.25-.54-.39-.8-.36-.66-.73-1.32-1.13-1.95-.41-.64-.85-1.26-1.36-1.83-.56-.63-1.16-1.23-1.93-1.23-.7 0-.98.4-1.82.4-.85 0-1.16-.39-1.82-.39-.79 0-1.37.6-1.93 1.23-.51.57-.95 1.19-1.36 1.83-.4.63-.77 1.29-1.13 1.95-.14.26-.26.53-.39.8-.23.48-.45.97-.64 1.47-.18.47-.34.95-.47 1.44-.13.5-.23 1.01-.3 1.53-.07.54-.1 1.09-.1 1.64 0 .13.01.26.02.39.01.13.03.26.05.39.02.13.05.26.08.39.03.13.07.26.12.39.05.13.11.26.18.39.07.13.15.26.24.39.09.13.19.26.3.39.11.13.23.26.36.39.13.13.27.26.42.39.15.13.31.26.48.39.17.13.35.26.54.39.19.13.39.26.6.39.21.13.43.26.66.39.23.13.47.26.72.39.25.13.51.26.78.39.27.13.55.26.84.39.29.13.59.26.9.39.31.13.63.26.96.39.33.13.67.26 1.02.39.35.13.71.26 1.08.39.37.13.75.26 1.14.39.39.13.79.26 1.2.39.41.13.83.26 1.26.39.43.13.87.26 1.32.39.45.13.91.26 1.38.39.47.13.95.26 1.44.39.49.13.99.26 1.5.39.51.13 1.03.26 1.56.39.53.13 1.07.26 1.62.39.55.13 1.11.26 1.68.39.57.13 1.15.26 1.74.39.59.13 1.19.26 1.8.39.61.13 1.23.26 1.86.39.63.13 1.27.26 1.92.39.65.13 1.31.26 1.98.39.67.13 1.35.26 2.04.39.69.13 1.39.26 2.1.39.71.13 1.43.26 2.16.39.73.13 1.47.26 2.22.39.75.13 1.51.26 2.28.39.77.13 1.55.26 2.34.39.79.13 1.59.26 2.4.39.81.13 1.63.26 2.46.39.83.13 1.67.26 2.52.39.85.13 1.71.26 2.58.39.87.13 1.75.26 2.64.39.89.13 1.79.26 2.7.39.91.13 1.83.26 2.76.39.93.13 1.87.26 2.82.39.95.13 1.91.26 2.88.39.97.13 1.94.26 2.92.39.99.13 1.99.26 3 .39.01 0 .01 0 .02 0z" />
        </svg>
        <span>Appleでサインイン</span>
      </button>
      <div className="relative">
        <div className="absolute inset-0 flex items-center">
          <span className="w-full border-t border-gray-200"></span>
        </div>
        <div className="relative flex justify-center">
          <span className="bg-white px-2 text-sm text-gray-500">または</span>
        </div>
      </div>
    </div>
  );
}
